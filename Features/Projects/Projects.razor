@page "/projects"
@inherits FluxorComponent

@using Thaniwasi.Client.Features.Projects.Components

@inject IState<ProjectsState> ProjectsState
@inject IDispatcher Dispatcher

<PageTitle>Projects</PageTitle>

<MudText Typo="Typo.h4" GutterBottom="true">
    <MudIcon Icon="@Icons.Material.Filled.Handyman" /> Projects
</MudText>

<ProjectForm />
<ProjectsTable />

@code {

    protected override void OnInitialized()
    {
        if (!ProjectsState.Value.Projects.Any())
        {
            Dispatcher.Dispatch(new ProjectsLoadAction());
        }

        base.OnInitialized();
    }

}
