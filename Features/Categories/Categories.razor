@page "/categories"
@inherits FluxorComponent

@using Thaniwasi.Client.Features.Categories.Components

@inject IState<CategoriesState> CategoriesState
@inject IDispatcher Dispatcher

<PageTitle>Categories</PageTitle>

<MudText Typo="Typo.h4" GutterBottom="true">
    <MudIcon Icon="@Icons.Material.Filled.FolderCopy" />
    Categories
</MudText>

<CategoryForm />
<CategoriesTable />

@code {

    protected override void OnInitialized()
    {
        if (!CategoriesState.Value.Categories.Any())
        {
            Dispatcher.Dispatch(new CategoriesLoadAction());
        }
        base.OnInitialized();
    }

}
